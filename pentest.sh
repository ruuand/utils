#!/bin/bash
# This script sets an environment for pentesting. It creates various folders and
# sets some environement variables.
# 

category='pentest'
# Checking if a name is given
if [[ $# -eq 1 ]] 
then
    mission=${1}
elif [[ $# -eq 2 ]]
then
    mission=${1}
    category=${2}
else 
    echo "A name for the pentest is missing :("
    exit 1
fi

if [[ ! -e $HOME/$category/ ]]
then
   mkdir $HOME/$category/
fi
# If the folder doesn't exist then we create it
if [[ ! -e $HOME/$category/$mission ]]
then
   mkdir $HOME/$category/$mission/
   mkdir $HOME/$category/$mission/nmap
   mkdir $HOME/$category/$mission/script_logs
fi

# Resetting all env variables
echo "export PENTEST=$HOME/$category/${1}" > $HOME/.pentest_env
echo "export NMAP_FOLDER=$HOME/$category/${1}/nmap" >> $HOME/.pentest_env
echo "export SCRIPT_FOLDER=$HOME/$category/${1}/script_logs" >> $HOME/.pentest_env
echo "export MSF_FOLDER=$HOME/$category/${1}/msf_logs" >> $HOME/.pentest_env
source $HOME/.pentest_env

echo "Everything is set in $HOME/$category/${1}. Let's root this shit !"
